<?php// Starting Sessionsession_start();// Import dependenciesrequire_once( 'config.php');require_once( 'libraries/Facebook/FacebookSession.php' );require_once( 'libraries/Facebook/FacebookRedirectLoginHelper.php' );require_once( 'libraries/Facebook/FacebookRequest.php' );require_once( 'libraries/Facebook/FacebookResponse.php' );require_once( 'libraries/Facebook/FacebookSDKException.php' );require_once( 'libraries/Facebook/FacebookRequestException.php' );require_once( 'libraries/Facebook/FacebookAuthorizationException.php' );require_once( 'libraries/Facebook/GraphObject.php' );require_once( 'libraries/Facebook/GraphUser.php' );require_once( 'libraries/Facebook/GraphSessionInfo.php' );// Define facebook namespaces
use Facebook\FacebookSession;use Facebook\FacebookRedirectLoginHelper;use Facebook\FacebookRequest;use Facebook\FacebookResponse;use Facebook\FacebookSDKException;use Facebook\FacebookRequestException;use Facebook\FacebookAuthorizationException;use Facebook\GraphObject;use Facebook\GraphUser;use Facebook\GraphSessionInfo;// Setup Facebook FacebookSession::setDefaultApplication($appId, $appSecret);// login helper with redirect_uri$helper = new FacebookRedirectLoginHelper('http://localhost/Facebook PHP Demo/index.php');// see if a existing session existsif ( isset( $_SESSION ) && isset(  $_SESSION['fb_token']) ) {  // create new session from saved access_token  $session = new FacebookSession( $_SESSION['fb_token'] );  // validate the access_token to make sure it's still valid  try {    if ( !$session->validate() ) {      $session = null;	  $_SESSION['fb_token']=NULL;    }  } catch ( Exception $e ) {    // catch any exceptions    $session = null;	$_SESSION['fb_token']=NULL;  }} else {  // no session exists  try {    $session = $helper->getSessionFromRedirect();  } catch( FacebookRequestException $ex ) {    // When Facebook returns an error  } catch( Exception $ex ) {    // When validation fails or other local issues    echo $ex->message;  }}// see if we have a sessionif ( isset( $session ) ) {  // save the session  $_SESSION['fb_token'] = $session->getToken();  // create a session using saved token or the new one we generated at login  $session = new FacebookSession( $session->getToken() );  // graph api request for user data  $request = new FacebookRequest( $session, 'GET', '/me' );  $response = $request->execute();  // get response  $graphObject = $response->getGraphObject()->asArray();  // print profile data  //echo '<pre>' . print_r( $graphObject, 1 ) . '</pre>';    $request = new FacebookRequest( $session, 'GET', '/me/albums/?fields=name,photos.limit(3){source}&limit=4' );  $response = $request->execute();  // get response  $albumslist = $response->getGraphObject()->asArray();  //echo '<pre>' . print_r( $albumslist, 1 ) . '</pre>';  // print logout url using session and redirect_uri (logout.php page should destroy the session)  //echo '<a href="' . $helper->getLogoutUrl( $session, 'http://yourwebsite.com/app/logout.php' ) . '">Logout</a>';  } else {	// redirect to login page ....  header("Location: login.php");}?><!doctype html><html>	<head>		<meta charset="UTF-8">		<meta name="viewport" content="width=device-width, initial-scale=1">		<title>Facebook PHP Demo</title>		<link rel="icon" href="images/logo1.jpg">		<!-- bootstrap style sheets -->		<link rel="stylesheet" href="css/bootstrap.min.css">		<link rel="stylesheet" href="css/font-awesome.min.css">		<!-- custom style sheets -->		<link rel="stylesheet" href="css/style.css">			<link rel="stylesheet" href="css/responsive.css">				<!--[if lt IE 9]>		  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>		  <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>		<![endif]-->	</head>	<body class="homepage" data-spy="scroll" data-target=".main-navigation">		<header id="site-header">			<div id="banner" class="transparent-section has-fixed-menu" data-image="images/header-bg.png" data-color="26, 188, 156" data-transparency="0.80">				<div class="transparent-content parallax-style">					<div class="header-content">						<div class="container">							<div class="site-title">								<h1 class="site-name">Welcome to Facebook PHP Demo</h1>							</div><!-- /.site-title -->							<h2 class="site-slogan">Awesome method to add  your selfies to social media ! </h2><!-- /.site-slogan -->							<div class="social-link">								<ul class="social-profiles">									<li class="item"><a href="https://www.facebook.com/Facebook PHP Demo" class="fa-facebook"><span>Facebook</span></a></li>									<li class="item"><a href="https://www.twitter.com/Facebook PHP Demo" class="fa-twitter"><span>Twitter</span></a></li>									<li class="item"><a href="https://www.linkedin.com/company/Facebook PHP Demo" class="fa-linkedin"><span>Linkedin</span></a></li>									<li class="item"><a href="https://plus.google.com/+Facebook PHP Demo" class="fa-plus"><span>Google+</span></a></li>								</ul>							</div><!-- /.social-link -->						</div>					</div><!-- /.header-content -->				</div><!-- /.transparent-content -->			</div><!-- /.transparent-section -->			 <nav id="site-navigation" class="main-navigation top-fixed" role="navigation">				<div class="menu-style2 container">					<div class="navigation-header">						<a href="index.html" class="logo"><img src="images/logo2.png" alt="Signature" class="site-logo"></a>						<button class="menu-switch">							<i class="fa fa-bars"></i>						</button>					</div> <!-- /.navigation-header -->					<ul class="nav navigation">						<li class="item"><a href="#site-header" class="fa-home">Home</a></li>						<li class="item"><a href="#about" class="fa-user">About You</a></li>						<li class="item"><a href="#education" class="fa-book">Your Education</a></li>						<li class="item"><a href="#albums" class="fa-briefcase">Your Albums</a></li>						<li class="item"><a href="http://localhost/Facebook PHP Demo/logout.php" class="fa-briefcase">Logout</a></li>					</ul> <!-- /.navigation -->				</div>			 </nav> <!-- /#site-navigation -->		</header><!-- /#site-header -->		  	<section id="about" class="default-section style-two" data-scroll-reveal="enter from the bottom over .5s">  		<div class="section-heading style-two">  			<h2 class="section-title">About You</h2>  		</div><!-- /.section-heading -->  		<div class="about-container">  			<div class="container">  				<div class="col-md-4" data-scroll-reveal="enter from the left after .5s">  					<div class="profile-photo section-box">					<img >					<img src="https://graph.facebook.com/<?= $graphObject['id'] ?>/picture?type=large" class="profile-image img-responsive" style="width:100%" >  					</div> <!-- /.profile-photo -->  				</div>  				<div class="col-md-8" data-scroll-reveal="enter from the right after .5s">  					<div class="profile-details section-box">  						<h2 class="title"><?= $graphObject['name'] ?></h2>  						<div class="about-content">  							<p class="orange-text">  								<?= $graphObject['bio'] ?>  							</p>  							<p>								FAVORITE QUOTES : 							</p>  								<?= $graphObject['quotes'] ?>  							</p>  						</div><!-- /.about-content -->  					</div><!-- /.profile-details -->  				</div>  			</div>  		</div><!-- /.about-container -->  	</section><!-- /#about -->		  	<section id="education" class="default-section style-two" data-scroll-reveal="enter from the bottom over .5s">  		<div class="section-heading style-two">  			<h2 class="section-title">Your Education</h2>  		</div><!-- /.section-heading -->  		<div class="container">        <div class="education-container">          <div class="education-items">			<?php foreach($graphObject['education'] as $key=>$value): ?>				<div class="col-md-4" data-scroll-reveal="enter from the left after .5s">				  <div class="education-item">					<div class="edu-time light-green">					  <p><?php if(property_exists($value,'year'))echo $value->year->name; else echo 'not provided'?><br /> 					</div><!-- /.edu-time -->					<div class="edu-title">					  <p class="edu-session"><?php echo $value->type;?></p>					  <p class="edu-inst"><?php echo $value->school->name;?></p>					</div><!-- /.edu-title -->				  </div><!-- /.education-item -->				</div>			 <?php endforeach; ?>          </div>          </div><!-- /.education-items -->        </div><!-- /.education-container -->      </div><!-- /.container -->  	</section><!-- /#education -->  	<section id="albums" class="default-section style-two" data-scroll-reveal="enter from the bottom over .5s">  		<div class="section-heading style-two">  			<h2 class="section-title">Your Albums</h2>  		</div><!-- /.section-heading -->  		<div class="container">  			<div class="portfolio-container">  				<div id="portfolio-filters" class="button-group">					<button class="btn filter-btn active" data-filter="*">All</button>					<?php foreach($albumslist['data'] as $key=>$value): ?>						<button class="btn filter-btn active" data-filter=".<?php echo $value->id;?>"><?php echo $value->name;?></button>					<?php endforeach; ?>  				</div><!-- /.albums-filters -->  				<div class="row">  					<div class="portfolio-items">						<?php foreach($albumslist['data'] as $albumkey=>$albumvalue): ?>						<?php foreach($albumvalue->photos->data as $photokey=>$photovalue): ?>  						<div class="portfolio-item <?php echo $albumvalue->id;?> col-sm-6 col-md-4">  							<div class="item-content">  								<img src="<?php echo $photovalue->source;?>" class="img-responsive">  								<div class="overlay-content">  									<div class="project-info">  										<div class="title-cat">  											<h2 class="project-title"> <?php echo $albumvalue->name;?> </h2>	  										</div><!-- /.title-cat -->  										<div class="project-link">  											<a href="<?php echo $photovalue->source;?> "><i class="fa fa-external-link"></i></a>	  										</div>  									</div>  								</div><!-- /.overlay-content -->  							</div>  						</div><!-- /.portfolio-item -->  						<?php endforeach; ?>						<?php endforeach; ?>					</div><!-- /.portfolio-items -->				</div>  			</div>  		</div><!-- /.portfolio-container -->  	</section><!-- /#albums section -->			<!-- JavaScript Library and Plugins -->  	<script src="js/jquery-1.11.1.min.js"></script>  	<script src="js/bootstrap.min.js"></script>    <script src="js/email-validation.js"></script>    <script src="js/jquery.parallax.js"></script>  	<script src="js/chart.min.js"></script>  	<script src='js/isotope.pkgd.min.js'></script>    <script src="js/scrollReveal.js"></script>  	<script src="js/custom.js"></script>    <script>          // Init scrollReveal.js      if (screen.width > 966) {        window.scrollReveal = new scrollReveal();      }    </script>	</body></html>